<h2>{{ post.author.username }}'s Post</h2>

<p>{{ post.content }}</p>
{% if post.author == user %}
    <a href="{% url 'edit_post' post.id %}">Edit</a>
    |
    <a href="{% url 'delete_post' post.id %}"
       style="color:red;">Delete</a>
{% endif %}

{% if post.image %}
    <img src="{{ post.image.url }}" width="400">
{% endif %}

<p>Likes: {{ post.likes.count }}</p>
<a href="{% url 'like_post' post.id %}">Like</a>
<hr>

<h3>Comments</h3>

{% for comment in post.comments.all %}
    <p>
        <strong>{{ comment.author.username }}</strong>:
        {{ comment.content }}

        {% if comment.author == user %}
            <a href="{% url 'delete_comment' comment.id %}"
               style="color:red;">Delete</a>
        {% endif %}
    </p>
{% empty %}
    <p>No comments yet.</p>
{% endfor %}

<hr>

<form method="POST" action="{% url 'add_comment' post.id %}">
    {% csrf_token %}
    <input type="text" name="content" placeholder="Add a comment" required>
    <button type="submit">Comment</button>
</form>

<br>
<a href="{% url 'feed' %}">Back to Feed</a>
